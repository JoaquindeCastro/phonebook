(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(15),o=n.n(a),u=n(6),i=n(3),s=n(4),l=n.n(s),d="/api/persons",b={getAll:function(){return l.a.get(d)},create:function(e){return l.a.post(d,e)},deleteOne:function(e){return l.a.delete("".concat(d,"/").concat(e))},update:function(e){return l.a.put("".concat(d,"/").concat(e.id),e)}},j=n(0),h=function(e){var t=e.filter,n=e.setFilter,c=e.handleOnChange;return Object(j.jsxs)("form",{children:[Object(j.jsx)("label",{htmlFor:"filter",children:Object(j.jsx)("em",{children:"Filter by name: "})}),Object(j.jsx)("input",{name:"filter",value:t,onChange:c(n)}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{})]})},f=function(e){var t=e.newName,n=e.setNewName,c=e.newNum,r=e.setNewNum,a=e.handleSubmit,o=e.handleOnChange;return Object(j.jsxs)("form",{onSubmit:a,children:[Object(j.jsx)("h2",{children:"Add new entry"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{htmlFor:"name",children:"Name: "}),Object(j.jsx)("input",{name:"name",value:t,onChange:o(n)}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"number",children:"Number: "}),Object(j.jsx)("input",{name:"number",value:c,onChange:o(r)})]}),Object(j.jsx)("br",{}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){var t=e.people,n=e.handleDelete;return Object(j.jsx)("table",{children:Object(j.jsx)("tbody",{children:t.map((function(e){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:e.name}),Object(j.jsx)("td",{children:e.number}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(){return n(e.id)},children:"Delete"})})]},e.id)}))})})},O=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},x=function(e){var t=e.message;if(null===t)return null;return Object(j.jsx)("div",{style:{color:"green",background:"lightgreen",fontSize:18,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:O(t)})},p=function(e){var t=e.message;if(null===t)return null;return Object(j.jsx)("div",{style:{color:"red",background:"#FFCCCC",fontSize:18,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:O(t)})},g=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),o=Object(i.a)(a,2),s=o[0],l=o[1],d=Object(c.useState)(""),O=Object(i.a)(d,2),g=O[0],v=O[1],y=Object(c.useState)(""),w=Object(i.a)(y,2),S=w[0],C=w[1],N=Object(c.useState)(""),k=Object(i.a)(N,2),F=k[0],A=k[1],B=Object(c.useState)(""),D=Object(i.a)(B,2),E=D[0],z=D[1],J=function(e){A(e),setTimeout((function(){return A("")}),3e3)};Object(c.useEffect)((function(){b.getAll().then((function(e){r(e.data)}))}),[]);var L=n.map((function(e){return e.name})),P=S?n.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())})):n,R=function(e){return function(t){e(t.target.value)}};return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"Phonebook"}),F?Object(j.jsx)(x,{message:F}):E?Object(j.jsx)(p,{message:E}):null,Object(j.jsx)(f,{newName:s,setNewName:l,newNum:g,setNewNum:v,handleSubmit:function(e){if(e.preventDefault(),L.includes(s)){if(window.confirm("".concat(s," is already in PhoneBook, do you want to update the ").concat(s,"'s number to ").concat(g,"?"))){var t=n.find((function(e){return e.name===s})),c=Object(u.a)(Object(u.a)({},t),{},{number:g});b.update(c).then((function(e){r(n.map((function(t){return t.id!==c.id?t:e.data})),J("Successfully updated ".concat(c.name,"'s number to ").concat(g,".")))})).catch((function(e){return alert("Error: ".concat(e))}))}}else{var a={name:s,number:g};b.create(a).then((function(e){r(n.concat(e.data)),J("Successfully added ".concat(s,"."))})).catch((function(e){return alert(e)}))}},handleOnChange:R}),Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)(h,{filter:S,setFilter:C,handleOnChange:R}),Object(j.jsx)(m,{people:P,handleDelete:function(e){var t=n.find((function(t){return t.id===e})).name;console.log(t),window.confirm("Are you sure you want to delete entry '".concat(t,"?'"))&&(b.deleteOne(e).then((function(e){J("successfully deleted entry '".concat(t,"'"))})).catch((function(e){return n="Entry ".concat(t," has already been removed from the database. Kindly refresh the browser to see updates."),z(n),void setTimeout((function(){return z("")}),3e3);var n})),r(n.filter((function(t){return t.id!==e}))))}})]})};o.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(g,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.600ab128.chunk.js.map